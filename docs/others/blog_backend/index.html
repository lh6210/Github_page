


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Hang's Math Notes</title>
    <!-- Required meta tags -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <link rel="stylesheet" href="static/styles.css">
    <link rel="stylesheet" href="static/style2.css">
    <!-- put configuration ahead of loading statements -->
    <script>
    window.MathJax = {
      tex: {
        inlineMath: [['$', '$'],['\\(', '\\)']],
        displayMath: [['$$', '$$'], ['\\[', '\\]']],
        processEscapes: true,
        processEnvironments: true
      },
      options: {
        processHtmlClass: "arithmatex"
      }
    };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" id="MathJax-script"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.slim.min.js" integrity="sha256-u7e5khyithlIdTpu22PHhENmPcRdFiHRjhAuHcs05RI=" crossorigin="anonymous"></script>
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-primary bg-opacity-10 text-dark">
  <div class="container-fluid">
      <a class="navbar-brand" href="/">Hang's Math Notes | Home</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse"  id="navbarSupportedContent">
      <ul class="navbar-nav ms-auto mb-2 mx-5 mb-lg-0 ">
        <li class="nav-item">
            <a class="nav-link" href= "/others/" >Others</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href= "/knots/" >Knots</a>
        </li>
        <li class="nav-item">
          <a class="nav-link disabled" href="#">About</a>
        </li>
      </ul>
    </div>
  </div>
</nav>
    
    
    <div class="container-fluid">
        <p>
            <h4> How do I build my blog </h4>
            <small> &#128197Published on November 08, 2021   &#9749Keywords: Latex-to-HTML rendering, Flask, Flask-FlatPages  </small> 
        </p>
        
        <p>This blog is built upon <em>Flask</em> and <em>Flask-Flatpages</em> and posted on Github Page.
What's fun about the building experience is a list of things:<br />
1) relearn Python and learn microframework Flask; <br />
2) learn to write blogs in Markdown language;  <br />
3) mix Jinja2, Python, CSS (Bootstrap), and Javascript in HTML templates;  <br />
4) search for desirable extensions for specific functions (eg. code highlight, Markdown to HTML conversion, Latex to HTML conversion, etc); <br />
5) get to know MathJax for Latex rendering in web pages;   <br />
6) lots of space to improve in the future (webpage design, integrate database for searching, comment section, etc)</p>
<p>Along the way of building this blog, I have met with several challenging but interesting technical issues. I will try to describe them below.</p>
<h6>Issue 1: Latex-to-HTML rendering</h6>
<p>One of the main technical issues that I have encountered was how to render Latex syntax in markdown files under my Flask backend.
By default, Flask-FlatPages renders flatpage body using Markdown with Pygments format (<a href="https://flask-flatpages.readthedocs.io/en/latest/#module-flask_flatpages">according to FlatPages Doc</a>).
However, for Math/Latex users the default rendering process might not work as desired. The problems are usually due to the conflicts between different meanings of <code>_</code> and <code>*</code> in Latex and Markdown. A common workaround is to tweak the Latex syntax inside Latex delimiters, which brings more or less hassles into the blog writings. For example, what I have experienced was that: inside a math block encircled by <code>$$</code>, instead of typing <code>_</code> for subscript, I have to type <code>\_</code>; instead of typing <code>*</code> for multiplication, I have to type <code>\*</code>; instead of typing <code>\\</code> for linebreak, I have to type <code>\\\\</code>.</p>
<p>Fortunately, Flask-Flatpage gives users the flexibiltiy to specify the render engine as well as self-define the rendering function. I ended up using <a href="https://python-markdown.github.io/">Python-Markdown</a> along with <a href="https://facelessuser.github.io/pymdown-extensions/extensions/arithmatex/">Arithmatex</a> for the rendering part. This combination allows me to write pure Latex inside most of math environments. One caveat that I have found lies in inline math environments. Instead of <code>$ Latex expressions $</code>, I would have to type <code>$\(  Latex expressions \)$</code> so that MathJax recognizes the math expressions and renders them seamlessly on the webpages. Other than that, everything is fine so far.  </p>
<p>Besides the rendering engine that I am using, I just want to mention that <a href="https://pandoc.org/index.html">Pandoc</a> is another good candidate. There is a technical issue as of how to integrate Pandoc into Python and Flask framework though. Regarding its powerful features, the effort should be worthwhile.</p>
<p>The steps that I have taken for Latex-to-HTML rendering: <br />
1. install Python-Markdown and pymdown-extensions <br />
    <div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #000000">pip</span> <span style="color: #000000">install</span> <span style="color: #000000">markdown</span>
<span style="color: #000000">pip</span> <span style="color: #000000">install</span> <span style="color: #000000">pymdown</span><span style="color: #ce5c00; font-weight: bold">-</span><span style="color: #000000">extensions</span>
</code></pre></div>
2. include Arithmatex extension in Python Markdown's configuration<br />
    <div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #204a87; font-weight: bold">import</span> <span style="color: #000000">markdown</span>   
<span style="color: #000000">md</span> <span style="color: #ce5c00; font-weight: bold">=</span> <span style="color: #000000">markdown</span><span style="color: #ce5c00; font-weight: bold">.</span><span style="color: #000000">Markdown</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #000000">extensions</span><span style="color: #ce5c00; font-weight: bold">=</span><span style="color: #000000; font-weight: bold">[</span><span style="color: #4e9a06">&#39;pymdownx.arithmatex&#39;</span><span style="color: #000000; font-weight: bold">])</span>
</code></pre></div>
3. define HTML renderer for Flask-FlatPages and update app configuration
    <div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #204a87; font-weight: bold">def</span> <span style="color: #000000">my_renderer</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #000000">text</span><span style="color: #000000; font-weight: bold">):</span>
    <span style="color: #204a87; font-weight: bold">return</span> <span style="color: #000000">md</span><span style="color: #ce5c00; font-weight: bold">.</span><span style="color: #000000">convert</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #000000">text</span><span style="color: #000000; font-weight: bold">)</span>

<span style="color: #000000">app</span><span style="color: #ce5c00; font-weight: bold">.</span><span style="color: #000000">config</span><span style="color: #000000; font-weight: bold">[</span><span style="color: #4e9a06">&#39;FLATPAGES_HTML_RENDERER&#39;</span><span style="color: #000000; font-weight: bold">]</span> <span style="color: #ce5c00; font-weight: bold">=</span> <span style="color: #000000">my_renderer</span>
</code></pre></div>
4. configure MathJax in HTML templates' head section [optional] 
    <div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #ce5c00; font-weight: bold">&lt;</span><span style="color: #000000">script</span><span style="color: #ce5c00; font-weight: bold">&gt;</span> 
<span style="color: #204a87">window</span><span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">MathJax</span> <span style="color: #ce5c00; font-weight: bold">=</span> <span style="color: #000000; font-weight: bold">{</span>
  <span style="color: #000000">tex</span><span style="color: #ce5c00; font-weight: bold">:</span> <span style="color: #000000; font-weight: bold">{</span>
    <span style="color: #000000">inlineMath</span><span style="color: #ce5c00; font-weight: bold">:</span> <span style="color: #000000; font-weight: bold">[[</span><span style="color: #4e9a06">&#39;$&#39;</span><span style="color: #000000; font-weight: bold">,</span> <span style="color: #4e9a06">&#39;$&#39;</span><span style="color: #000000; font-weight: bold">],[</span><span style="color: #4e9a06">&#39;\\(&#39;</span><span style="color: #000000; font-weight: bold">,</span> <span style="color: #4e9a06">&#39;\\)&#39;</span><span style="color: #000000; font-weight: bold">]],</span>
    <span style="color: #000000">displayMath</span><span style="color: #ce5c00; font-weight: bold">:</span> <span style="color: #000000; font-weight: bold">[[</span><span style="color: #4e9a06">&#39;$$&#39;</span><span style="color: #000000; font-weight: bold">,</span> <span style="color: #4e9a06">&#39;$$&#39;</span><span style="color: #000000; font-weight: bold">],</span> <span style="color: #000000; font-weight: bold">[</span><span style="color: #4e9a06">&#39;\\[&#39;</span><span style="color: #000000; font-weight: bold">,</span> <span style="color: #4e9a06">&#39;\\]&#39;</span><span style="color: #000000; font-weight: bold">]],</span>
    <span style="color: #000000">processEscapes</span><span style="color: #ce5c00; font-weight: bold">:</span> <span style="color: #204a87; font-weight: bold">true</span><span style="color: #000000; font-weight: bold">,</span>
    <span style="color: #000000">processEnvironments</span><span style="color: #ce5c00; font-weight: bold">:</span> <span style="color: #204a87; font-weight: bold">true</span>
  <span style="color: #000000; font-weight: bold">},</span>
  <span style="color: #000000">options</span><span style="color: #ce5c00; font-weight: bold">:</span> <span style="color: #000000; font-weight: bold">{</span>
    <span style="color: #000000">processHtmlClass</span><span style="color: #ce5c00; font-weight: bold">:</span> <span style="color: #4e9a06">&quot;arithmatex&quot;</span>
  <span style="color: #000000; font-weight: bold">}</span>
<span style="color: #000000; font-weight: bold">};</span>
<span style="color: #ce5c00; font-weight: bold">&lt;</span><span style="color: #a40000; border: 1px solid #ef2929">/script&gt;</span>
</code></pre></div></p>
<h6>Issue 2: group pages under the same category in the index page</h6>
<p>Right now in my home page there is only one category - Linear Algebra and there's only one article below it. But imagine that later I might add another category - Calculus into this page. The way I want my home page functions is that once Flask-Flatpages fetches all of my Markdown posts in the backend, a certain component would sort these posts by their category set in the YAML heading and list them under their category automatically.   </p>
<p>In another word, I don't need to edit my index page anymore whenever I add a new post. The component that magically does the job is several lines of Javascript code below:  </p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>    <span style="color: #000000; font-weight: bold">&lt;</span><span style="color: #204a87; font-weight: bold">div</span> <span style="color: #c4a000">class</span><span style="color: #ce5c00; font-weight: bold">=</span><span style="color: #4e9a06">&quot;container-fluid la&quot;</span><span style="color: #000000; font-weight: bold">&gt;</span>
        <span style="color: #000000; font-weight: bold">&lt;</span><span style="color: #204a87; font-weight: bold">p</span><span style="color: #000000; font-weight: bold">&gt;</span>
        <span style="color: #000000; font-weight: bold">&lt;</span><span style="color: #204a87; font-weight: bold">h4</span><span style="color: #000000; font-weight: bold">&gt;</span>Linear Algebra <span style="color: #000000; font-weight: bold">&lt;/</span><span style="color: #204a87; font-weight: bold">h4</span><span style="color: #000000; font-weight: bold">&gt;</span> 
        <span style="color: #000000; font-weight: bold">&lt;</span><span style="color: #204a87; font-weight: bold">small</span><span style="color: #000000; font-weight: bold">&gt;</span> -- in reference to &#39;Introduction to Linear Algebra&#39; written by Prof. Gilbert Strang<span style="color: #000000; font-weight: bold">&lt;/</span><span style="color: #204a87; font-weight: bold">small</span><span style="color: #000000; font-weight: bold">&gt;</span> 
        <span style="color: #000000; font-weight: bold">&lt;/</span><span style="color: #204a87; font-weight: bold">p</span><span style="color: #000000; font-weight: bold">&gt;</span>
    <span style="color: #000000; font-weight: bold">&lt;/</span><span style="color: #204a87; font-weight: bold">div</span><span style="color: #000000; font-weight: bold">&gt;</span>

    {% for page in pages %}
        {% if page.category == &#39;la&#39; %}
            <span style="color: #000000; font-weight: bold">&lt;</span><span style="color: #204a87; font-weight: bold">script</span><span style="color: #000000; font-weight: bold">&gt;</span>
                <span style="color: #204a87; font-weight: bold">var</span> <span style="color: #000000">newItem</span> <span style="color: #ce5c00; font-weight: bold">=</span> <span style="color: #000000">$</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #4e9a06">&quot;&lt;div&gt;&lt;/div&gt;&quot;</span><span style="color: #000000; font-weight: bold">,</span> <span style="color: #000000; font-weight: bold">{</span>
                    <span style="color: #4e9a06">&quot;class&quot;</span><span style="color: #ce5c00; font-weight: bold">:</span> <span style="color: #4e9a06">&quot;la-item&quot;</span><span style="color: #000000; font-weight: bold">})</span>
                <span style="color: #000000">$</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #4e9a06">&quot; &lt;a href={{url_for(&#39;page&#39;, page.path)}}&gt;  &amp;#9834 {{ page.title}}&lt;/a&gt; &lt;br&gt;&quot;</span><span style="color: #000000; font-weight: bold">).</span><span style="color: #000000">appendTo</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #000000">newItem</span><span style="color: #000000; font-weight: bold">)</span>
                <span style="color: #000000">$</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #4e9a06">&quot;&lt;small&gt; &amp;nbsp; &amp;nbsp; &amp;#128197Published on {{page.date.strftime(&#39;%B %d, %Y&#39;)}} &lt;/small&gt;&quot;</span><span style="color: #000000; font-weight: bold">).</span><span style="color: #000000">appendTo</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #000000">newItem</span><span style="color: #000000; font-weight: bold">)</span>  
                <span style="color: #000000">$</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #4e9a06">&quot;&lt;small&gt; &amp;#9749Keywords: {{page.keywords}} &lt;/small&gt; &lt;br&gt;&quot;</span><span style="color: #000000; font-weight: bold">).</span><span style="color: #000000">appendTo</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #000000">newItem</span><span style="color: #000000; font-weight: bold">)</span> 
                <span style="color: #000000">$</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #4e9a06">&quot;.la&quot;</span><span style="color: #000000; font-weight: bold">).</span><span style="color: #000000">append</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #000000">newItem</span><span style="color: #000000; font-weight: bold">)</span>
            <span style="color: #000000; font-weight: bold">&lt;/</span><span style="color: #204a87; font-weight: bold">script</span><span style="color: #000000; font-weight: bold">&gt;</span>

        {% endif %}
    {% endfor %}
</code></pre></div>
<p>My home page consists of one or more categories (such as Linear Algebra, Calculus, etc). Each category takes up one Bootstrap-styled container. Inside each container, the name of the category and a brief description are placed at the top wrapped by <p> tags. Contents following them are entries of articles of this category.</p>
<p>The for loop inside the Jinja2 tags will search through all of my posts, whenever it finds out some post belonging to <em>la</em> (self-defined code for Linear Algebra) category, it will put it under <em>la</em> category by running Javascript/JQuery commands.<br />
In fact, I was pretty amazed at mixing several languages (CSS, Jinja2, and Javascript) in HTML files to achieve the functionality. </p>
<p>Above all, the automatic sorting and DOM manipulation ease writer's effort to manage the layout. Thanks for your reading.</p>

        <script src="https://utteranc.es/client.js"
                repo="lh6210/lh6210.github.io"
                issue-term="title"
                label="comment"
                theme="github-light"
                crossorigin="anonymous"
                async>
        </script>

    </div>





</body>
</html>